var ASG;!function(t){var n=function(){function t(t,n,e){this.fullscreen=t,this.timeout=n,this.galleryId=e,this.defaults={title:"",subtitle:"",baseUrl:"",fields:{url:"url",title:"title",description:"description",thumbnail:"thumbnail"},transition:"rotateLR",theme:"darkblue",thumbnail:{class:"col-md-3"},preload:[0],header:!0,help:!1},this._visible=!1,this._fullscreen=!1,this.arrowsVisible=!1,this.themes=["darkblue","whiteblue"],this.transitions=["no","fadeInOut","zoomInOut","rotateLR","rotateTB","rotateZY","slideLR","slideTB","flipX","flipY"],void 0==this.id&&(this.id="asgid"+this.galleryId.getNext())}return t.prototype.$onInit=function(){var t=this;this.setDefaults(),this.options.preload&&this.options.preload.forEach(function(n){t.loadImage(n)})},t.prototype.setDefaults=function(){void 0==this.items&&(this.items=[]),void 0==this.files&&(this.files=[]),void 0==this.selected&&(this.selected=0),void 0==this.options&&(this.options=this.defaults),this.options=angular.merge(this.defaults,this.options);var t=this;angular.forEach(this.items,function(n,e){var i=t.options.baseUrl+n[t.options.fields.url],s=t.options.baseUrl+(n[t.options.fields.thumbnail]?n[t.options.fields.thumbnail]:n[t.options.fields.url]),r=(i.toString().match(/.*\/(.+?)\./),n[t.options.fields.title]?n[t.options.fields.title]:null),l={url:i,thumbnail:s,title:r,description:n[t.options.fields.description]?n[t.options.fields.description]:null,loaded:!1};t.files.push(l)})},t.prototype.init=function(){var t=this;this.timeout(function(){var n=".gallery-view."+t.id+" li.dropdown-submenu";angular.element(n).off().on("click",function(t){t.stopPropagation(),angular.element(this).hasClass("open")?angular.element(this).removeClass("open"):(angular.element(n).removeClass("open"),angular.element(this).addClass("open"))}),t.setFocus()},100)},t.prototype.getClass=function(){var t=[];return this.options.header||t.push("noheader"),t.push(this.options.theme),t.join(" ")},t.prototype.preload=function(t){var n=this;this.timeout(function(){n.loadImage(n.selected),n.loadImage(0),n.loadImage(n.selected+1),n.loadImage(n.selected-1),n.loadImage(n.selected+2),n.loadImage(n.files.length-1)},void 0!=t?t:750)},t.prototype.normalize=function(t){var n=this.files.length-1;return t>n?t-n-1:t<0?n-Math.abs(t)+1:t},t.prototype.loadImage=function(t){if(t=this.normalize(t),!this.files[t])return void console.warn("Invalid file index: "+t);if(!this.files[t].loaded){(new Image).src=this.files[t].url,this.files[t].loaded=!0}},Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this._visible?(this.init(),this.preload(1),angular.element("body").addClass("yhidden")):angular.element("body").removeClass("yhidden")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingle",{get:function(){return!(this.files.length>1)},enumerable:!0,configurable:!0}),t.prototype.setFocus=function(){angular.element(".gallery-view."+this.id+" .keyInput").trigger("focus").focus()},t.prototype.setTransition=function(t){this.options.transition=t,this.setFocus()},t.prototype.setTheme=function(t){this.options.theme=t,this.setFocus()},t.prototype.arrowsHide=function(){this.arrowsVisible=!1},t.prototype.arrowsShow=function(){this.arrowsVisible=!0},t.prototype.downloadLink=function(){if(void 0!=this.selected)return this.options.baseUrl+this.files[this.selected][this.options.fields.url]},Object.defineProperty(t.prototype,"file",{get:function(){return this.files[this.selected]},enumerable:!0,configurable:!0}),t.prototype.toBackward=function(){this.direction="backward",this.selected=this.normalize(this.selected-1),this.preload()},t.prototype.toForward=function(){this.direction="forward",this.selected=this.normalize(this.selected+1),this.preload()},t.prototype.toFirst=function(){this.direction="backward",this.selected=0,this.preload()},t.prototype.toLast=function(){this.direction="forward",this.selected=this.files.length-1,this.preload()},t.prototype.open=function(t){this.selected=t,this.visible=!0},t.prototype.exit=function(){this.visible=!1},t.prototype.keyUp=function(t){27==t.keyCode&&this.exit(),32==t.keyCode&&this.toForward(),37==t.keyCode&&this.toBackward(),39==t.keyCode&&this.toForward(),38!=t.keyCode&&36!=t.keyCode||this.toFirst(),40!=t.keyCode&&35!=t.keyCode||this.toLast(),70!=t.keyCode&&13!=t.keyCode||this.toggleFullScreen(),71==t.keyCode&&this.toggleHeader(),72==t.keyCode&&this.toggleHelp(),84==t.keyCode&&this.nextTransition()},t.prototype.nextTransition=function(){var t=this.transitions.indexOf(this.options.transition)+1,n=t>=this.transitions.length?0:t;this.options.transition=this.transitions[n]},t.prototype.toggleFullScreen=function(){this.fullscreen.isEnabled()?this.fullscreen.cancel():this.fullscreen.all(),this.setFocus()},t.prototype.toggleHelp=function(){this.options.help=!this.options.help,this.setFocus()},t.prototype.toggleHeader=function(){this.options.header=!this.options.header},t}();t.GalleryViewController=n;var e=function(){function t(){this.id=1}return t.prototype.getNext=function(){return this.id++},t}();t.GalleryIdService=e;var i=angular.module("angularSuperGallery",["ngAnimate"]);i.service("galleryId",e),i.component("galleryView",{controller:["Fullscreen","$timeout","galleryId",t.GalleryViewController],templateUrl:"views/angular-super-gallery.html",bindings:{visible:"=",selected:"<",items:"=",options:"=?"}}),i.provider("angularSuperGalleryOptions",function(){var t={};return{setOpts:function(n){angular.extend(t,n)},$get:function(){return t}}}),i.directive("imageOnload",function(){return{restrict:"A",link:function(t,n,e){n.bind("load",function(){t.$apply(e.imageOnload)})}}}),i.filter("bytes",function(){return function(t,n){if(isNaN(parseFloat(t))||!isFinite(t))return"";if(0===t)return"0";void 0===n&&(n=1);var e=["bytes","kB","MB","GB","TB","PB"],i=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,Math.floor(i))).toFixed(n)+" "+e[i]}})}(ASG||(ASG={})),angular.module("angularSuperGallery").run(["$templateCache",function(t){t.put("views/angular-super-gallery.html",'<div class="gallery-panel">\r\n\r\n\t<div class="row">\r\n\t\t<div class="{{ $ctrl.options.thumbnail.class }}" data-ng-repeat="(key,file) in $ctrl.files">\r\n\t\t\t<a class="thumbnail" href="#{{key}}" data-ng-click="$ctrl.open(key)">\r\n\t\t\t\t<img data-ng-src="{{ file.thumbnail }}" alt="{{ file.title }}">\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t</div>\r\n\r\n</div>\r\n\r\n<div class="gallery-view {{ $ctrl.id }}" data-ng-class="$ctrl.getClass()" data-ng-click="$ctrl.setFocus()" data-ng-show="$ctrl.visible" data-ng-cloak>\r\n\r\n\t<div tabindex="1" class="keyInput" data-ng-keydown="$ctrl.keyUp($event)"></div>\r\n\r\n\t<div class="header">\r\n\r\n        <span class="buttons pull-right visible-sm visible-md visible-lg">\r\n\r\n                <button data-ng-if="!$ctrl.isSingle" class="btn btn-default btn-sm" data-ng-click="$ctrl.toFirst()">\r\n                    {{ $ctrl.selected + 1 }} | {{ $ctrl.files.length }}\r\n                </button>\r\n\r\n                <button data-ng-if="!$ctrl.isSingle" class="btn btn-default btn-sm" data-ng-click="$ctrl.toBackward()">\r\n                    <span class="glyphicon glyphicon-chevron-left"></span>\r\n                </button>\r\n\r\n                <button data-ng-if="!$ctrl.isSingle" class="btn btn-default btn-sm" data-ng-click="$ctrl.toForward()">\r\n                    <span class="glyphicon glyphicon-chevron-right"></span>\r\n                </button>\r\n\r\n             <span data-ng-if="!$ctrl.isSingle" class="dropdown">\r\n                    <button class="btn btn-default btn-sm dropdown-toggle ng-binding" type="button" data-toggle="dropdown">\r\n                        <span class="glyphicon glyphicon-menu-hamburger"></span>\r\n                    </button>\r\n                    <ul class="dropdown-menu pull-right">\r\n                        <li class="dropdown-submenu">\r\n                            <a class="transitions" tabindex="-1" href="#">Transitions <span class="caret"></span></a>\r\n                            <ul class="dropdown-menu">\r\n                                <li><a tabindex="-1" href="#" data-ng-click="$ctrl.setTransition(transition)" data-ng-repeat="transition in $ctrl.transitions">\r\n                                    <span data-ng-class="{\'highlight\' : transition == $ctrl.transition}">\r\n                                        {{ transition }}</span></a>\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n\t\t\t\t\t\t<li class="dropdown-submenu">\r\n                            <a class="themes" tabindex="-1" href="#">Themes <span class="caret"></span></a>\r\n                            <ul class="dropdown-menu">\r\n                                <li><a tabindex="-1" href="#" data-ng-click="$ctrl.setTheme(theme)" data-ng-repeat="theme in $ctrl.themes">\r\n                                    <span data-ng-class="{\'highlight\' : theme == $ctrl.options.theme}">\r\n                                        {{ theme }}</span></a>\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n                        <li><a href="#" tabindex="-1" data-ng-click="$ctrl.toggleHelp()">Help</a></li>\r\n                    </ul>\r\n                </span>\r\n\r\n\r\n                <button class="btn btn-default btn-sm" data-ng-click="$ctrl.toggleHeader()">\r\n                    <span data-ng-if="$ctrl.options.header" class="glyphicon glyphicon-chevron-up"></span>\r\n                    <span data-ng-if="!$ctrl.options.header" class="glyphicon glyphicon-chevron-down"></span>\r\n                </button>\r\n\r\n                <button class="btn btn-default btn-sm" data-ng-click="$ctrl.toggleFullScreen()">\r\n                    <span class="glyphicon glyphicon-fullscreen"></span>\r\n                </button>\r\n\r\n                <button class="btn btn-default btn-sm" data-ng-click="$ctrl.exit()">\r\n                    <span class="glyphicon glyphicon-remove"></span>\r\n                </button>\r\n\r\n            </span>\r\n\r\n\t\t<span class="buttons pull-right visible-xs">\r\n\r\n                    <button data-ng-if="!$ctrl.isSingle" class="btn btn-default btn-xs" data-ng-click="$ctrl.toFirst()">\r\n                        {{ $ctrl.selected + 1 }} | {{ $ctrl.files.length }}\r\n                    </button>\r\n\r\n                    <button data-ng-if="!$ctrl.isSingle" class="btn btn-default btn-xs" data-ng-click="$ctrl.toBackward()">\r\n                        <span class="glyphicon glyphicon-chevron-left"></span>\r\n                    </button>\r\n\r\n                    <button data-ng-if="!$ctrl.isSingle" class="btn btn-default btn-xs" data-ng-click="$ctrl.toForward()">\r\n                        <span class="glyphicon glyphicon-chevron-right"></span>\r\n                    </button>\r\n\r\n                    <span data-ng-if="!$ctrl.isSingle" class="dropdown">\r\n                        <button class="btn btn-default btn-xs dropdown-toggle ng-binding" type="button" data-toggle="dropdown">\r\n                            <span class="glyphicon glyphicon-menu-hamburger"></span>\r\n                        </button>\r\n                        <ul class="dropdown-menu pull-right">\r\n                            <li class="dropdown-submenu">\r\n                                <a class="transitions" tabindex="-1" href="#">Transitions <span class="caret"></span></a>\r\n                                <ul class="dropdown-menu">\r\n                                    <li><a tabindex="-1" href="#" data-ng-click="$ctrl.setTransition(transition)" data-ng-repeat="transition in $ctrl.transitions">\r\n                                        <span data-ng-class="{\'highlight\' : transition == $ctrl.transition}">\r\n                                            {{ transition }}</span></a>\r\n                                    </li>\r\n                                </ul>\r\n                            </li>\r\n\t\t\t\t\t\t\t<li class="dropdown-submenu">\r\n                            <a class="themes" tabindex="-1" href="#">Themes <span class="caret"></span></a>\r\n                            <ul class="dropdown-menu">\r\n                                <li><a tabindex="-1" href="#" data-ng-click="$ctrl.setTheme(theme)" data-ng-repeat="theme in $ctrl.themes">\r\n                                    <span data-ng-class="{\'highlight\' : theme == $ctrl.options.theme}">\r\n                                        {{ theme }}</span></a>\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n                            <li><a href="#" tabindex="-1" data-ng-click="$ctrl.toggleHelp()">Help</a></li>\r\n                        </ul>\r\n                    </span>\r\n\r\n                    <button class="btn btn-default btn-xs" data-ng-click="$ctrl.toggleHeader()">\r\n                        <span data-ng-if="$ctrl.options.header" class="glyphicon glyphicon-chevron-up"></span>\r\n                        <span data-ng-if="!$ctrl.options.header" class="glyphicon glyphicon-chevron-down"></span>\r\n                    </button>\r\n\r\n                    <button class="btn btn-default btn-xs" data-ng-click="$ctrl.toggleFullScreen()">\r\n                        <span class="glyphicon glyphicon-fullscreen"></span>\r\n                    </button>\r\n\r\n                    <button class="btn btn-default btn-xs" data-ng-click="$ctrl.exit()">\r\n                        <span class="glyphicon glyphicon-remove"></span>\r\n                    </button>\r\n\r\n                </span>\r\n\r\n\t\t<h2 class="visible-md visible-lg">\r\n\t\t\t{{ $ctrl.options.title }} <sup data-ng-if="$ctrl.options.subtitle">{{ $ctrl.options.subtitle }}</sup>\r\n\t\t</h2>\r\n\r\n\t\t<h3 class="visible-sm">\r\n\t\t\t{{ $ctrl.options.title }} <sup data-ng-if="$ctrl.options.subtitle">{{ $ctrl.options.subtitle }}</sup>\r\n\t\t</h3>\r\n\r\n\t\t<h4 class="visible-xs">\r\n\t\t\t{{ $ctrl.options.title }} <sup data-ng-if="$ctrl.options.subtitle">{{ $ctrl.options.subtitle }}</sup>\r\n\t\t</h4>\r\n\r\n\t</div>\r\n\r\n\t<div class="help text-right" data-ng-click="$ctrl.toggleHelp()" data-ng-show="$ctrl.options.help">\r\n\t\tSPACE : forward<br>\r\n\t\tRIGHT : forward<br>\r\n\t\tLEFT : backward<br>\r\n\t\tUP : first<br>\r\n\t\tDOWN : last<br>\r\n\t\tESC : exit<br>\r\n\t\tT : change transition<br>\r\n\t\tF : toggle fullscreen<br>\r\n\t\tG : toggle header<br>\r\n\t\tH : toggle help\r\n\t</div>\r\n\r\n\r\n\t<div class="images {{ $ctrl.direction }} {{ $ctrl.options.transition }}" data-ng-mouseover="$ctrl.arrowsShow()" data-ng-mouseleave="$ctrl.arrowsHide()" data-ng-swipe-left="$ctrl.toForward()" data-ng-swipe-right="$ctrl.toBackward()">\r\n\r\n\t\t<div class="img" data-ng-repeat="(key,file) in $ctrl.files" data-ng-show="$ctrl.selected == key" data-ng-class="{\'loading\' : !file.loaded}">\r\n\r\n\t\t\t<img class="source" data-ng-src="{{ file.url }}" data-ng-if="file.loaded">\r\n\r\n\t\t\t<div class="details">\r\n\t\t\t\t<a href="{{ $ctrl.downloadLink() }}" target="_blank">\r\n\t\t\t\t\t<span class="title">{{ $ctrl.file.title }}</span>\r\n\t\t\t\t\t<span class="description">{{ $ctrl.file.description }}</span>\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div data-ng-if="!$ctrl.isSingle" data-ng-show="$ctrl.arrowsVisible" class="toBackward">\r\n\r\n\t\t\t<button class="btn btn-default btn-lg pull-left visible-md visible-lg" data-ng-click="$ctrl.toBackward()">\r\n\t\t\t\t<span class="glyphicon glyphicon-chevron-left"></span>\r\n\t\t\t</button>\r\n\r\n\t\t\t<button class="btn btn-default btn-md pull-left visible-sm" data-ng-click="$ctrl.toBackward()">\r\n\t\t\t\t<span class="glyphicon glyphicon-chevron-left"></span>\r\n\t\t\t</button>\r\n\r\n\t\t\t<button class="btn btn-default btn-sm pull-left visible-xs" data-ng-click="$ctrl.toBackward()">\r\n\t\t\t\t<span class="glyphicon glyphicon-chevron-left"></span>\r\n\t\t\t</button>\r\n\r\n\t\t</div>\r\n\r\n\t\t<div data-ng-if="!$ctrl.isSingle" data-ng-show="$ctrl.arrowsVisible" class="toForward">\r\n\r\n\t\t\t<button class="btn btn-default btn-lg pull-right visible-md visible-lg" data-ng-click="$ctrl.toForward()">\r\n\t\t\t\t<span class="glyphicon glyphicon-chevron-right"></span>\r\n\t\t\t</button>\r\n\r\n\t\t\t<button class="btn btn-default btn-md pull-right visible-sm" data-ng-click="$ctrl.toForward()">\r\n\t\t\t\t<span class="glyphicon glyphicon-chevron-right"></span>\r\n\t\t\t</button>\r\n\r\n\t\t\t<button class="btn btn-default btn-sm pull-right visible-xs" data-ng-click="$ctrl.toForward()">\r\n\t\t\t\t<span class="glyphicon glyphicon-chevron-right"></span>\r\n\t\t\t</button>\r\n\r\n\t\t</div>\r\n\r\n\t\t<div data-ng-show="$ctrl.arrowsVisible" class="functions">\r\n\t\t</div>\r\n\r\n\t</div>\r\n\r\n\r\n</div>\r\n\r\n')}]);