var ASG;!function(t){var n=function(){function t(t,n,i){this.fullscreen=t,this.timeout=n,this.galleryId=i,this.defaults={title:"",subtitle:"",baseUrl:"",fields:{url:"url",title:"title",description:"description",thumbnail:"thumbnail"},thumbnail:{class:"col-md-3"},preload:[0]},this.help=!1,this.gui=!0,this._visible=!1,this._fullscreen=!1,this.functionsVisible=!1,this.transition="rotateLR",this.transitions=["no","fadeInOut","zoomInOut","rotateLR","rotateTB","rotateZY","slideLR","slideTB","flipX","flipY"],void 0==this.id&&(this.id="asgid"+this.galleryId.getNext())}return t.prototype.$onInit=function(){var t=this;this.setDefaults(),this.options.preload&&this.options.preload.forEach(function(n){t.loadImage(n)})},t.prototype.setDefaults=function(){void 0==this.files&&(this.files=[]),void 0==this.selected&&(this.selected=0),void 0==this.options&&(this.options=this.defaults),this.options=angular.merge(this.defaults,this.options);var t=this;angular.forEach(this.files,function(n,i){var l=t.options.baseUrl+n[t.options.fields.url],s=t.options.baseUrl+(n[t.options.fields.thumbnail]?n[t.options.fields.thumbnail]:n[t.options.fields.url]);t.files[i].source=l,t.files[i].thumbnail=s,t.files[i].title=n[t.options.fields.title]?n[t.options.fields.title]:null,t.files[i].description=n[t.options.fields.description]?n[t.options.fields.description]:null})},t.prototype.init=function(){var t=this;this.timeout(function(){var n=".gallery-view."+t.id+" li.dropdown-submenu";angular.element(n).off().on("click",function(t){t.stopPropagation(),angular.element(this).hasClass("open")?angular.element(this).removeClass("open"):(angular.element(n).removeClass("open"),angular.element(this).addClass("open"))}),t.setFocus()},100)},t.prototype.preload=function(t){var n=this;this.timeout(function(){n.loadImage(n.selected),n.loadImage(0),n.loadImage(n.selected+1),n.loadImage(n.selected-1),n.loadImage(n.selected+2),n.loadImage(n.files.length-1)},void 0!=t?t:750)},t.prototype.normalize=function(t){var n=this.files.length-1;return t>n?t-n-1:t<0?n-Math.abs(t)+1:t},t.prototype.loadImage=function(t){if(t=this.normalize(t),!this.files[t])return void console.warn("Invalid file index: "+t);if(!this.files[t].loaded){(new Image).src=this.files[t].source,this.files[t].loaded=!0}},Object.defineProperty(t.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this._visible?(this.init(),this.preload(1),angular.element("body").addClass("yhidden")):angular.element("body").removeClass("yhidden")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSingle",{get:function(){return!(this.files.length>1)},enumerable:!0,configurable:!0}),t.prototype.setFocus=function(){angular.element(".gallery-view."+this.id+" .keyInput").trigger("focus").focus()},t.prototype.setTransition=function(t){this.transition=t,this.setFocus()},t.prototype.functionsHide=function(){this.functionsVisible=!1},t.prototype.functionsShow=function(){this.functionsVisible=!0},t.prototype.downloadLink=function(){if(void 0!=this.selected)return this.options.baseUrl+this.files[this.selected][this.options.fields.url]},Object.defineProperty(t.prototype,"file",{get:function(){return this.files[this.selected]},enumerable:!0,configurable:!0}),t.prototype.toBackward=function(){this.direction="backward",this.selected=this.normalize(this.selected-1),this.preload()},t.prototype.toForward=function(){this.direction="forward",this.selected=this.normalize(this.selected+1),this.preload()},t.prototype.toFirst=function(){this.direction="backward",this.selected=0,this.preload()},t.prototype.toLast=function(){this.direction="forward",this.selected=this.files.length-1,this.preload()},t.prototype.open=function(t){this.selected=t,this.visible=!0},t.prototype.exit=function(){this.visible=!1},t.prototype.keyUp=function(t){27==t.keyCode&&this.exit(),32==t.keyCode&&this.toForward(),37==t.keyCode&&this.toBackward(),39==t.keyCode&&this.toForward(),38!=t.keyCode&&36!=t.keyCode||this.toFirst(),40!=t.keyCode&&35!=t.keyCode||this.toLast(),70!=t.keyCode&&13!=t.keyCode||this.toggleFullScreen(),71==t.keyCode&&this.toggleGUI(),72==t.keyCode&&this.toggleHelp(),84==t.keyCode&&this.nextTransition()},t.prototype.nextTransition=function(){var t=this.transitions.indexOf(this.transition)+1,n=t>=this.transitions.length?0:t;this.transition=this.transitions[n]},t.prototype.toggleFullScreen=function(){this.fullscreen.isEnabled()?this.fullscreen.cancel():this.fullscreen.all(),this.setFocus()},t.prototype.toggleHelp=function(){this.help=!this.help,this.setFocus()},t.prototype.toggleGUI=function(){this.gui=!this.gui},t}();t.GalleryViewController=n;var i=function(){function t(){this.id=1}return t.prototype.getNext=function(){return this.id++},t}();t.GalleryIdService=i;var l=angular.module("angularSuperGallery",["ngAnimate"]);l.service("galleryId",i),l.component("galleryView",{controller:["Fullscreen","$timeout","galleryId",t.GalleryViewController],templateUrl:"views/angular-super-gallery.html",bindings:{visible:"=",selected:"<",files:"=",options:"=?"}}),l.provider("angularSuperGalleryOptions",function(){var t={};return{setOpts:function(n){angular.extend(t,n)},$get:function(){return t}}}),l.directive("imageOnload",function(){return{restrict:"A",link:function(t,n,i){n.bind("load",function(){t.$apply(i.imageOnload)})}}}),l.filter("bytes",function(){return function(t,n){if(isNaN(parseFloat(t))||!isFinite(t))return"";if(0===t)return"0";void 0===n&&(n=1);var i=["bytes","kB","MB","GB","TB","PB"],l=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,Math.floor(l))).toFixed(n)+" "+i[l]}})}(ASG||(ASG={})),angular.module("angularSuperGallery").run(["$templateCache",function(t){t.put("views/angular-super-gallery.html",'<div class="gallery-panel">\r\n\r\n\t<div class="row">\r\n\t\t<div class="{{ $ctrl.options.thumbnail.class }}" data-ng-repeat="(key,file) in $ctrl.files">\r\n\t\t\t<a class="thumbnail" href="#{{key}}" data-ng-click="$ctrl.open(key)">\r\n\t\t\t\t<img data-ng-src="{{ file.thumbnail }}" alt="{{ file.title }}">\r\n\t\t\t</a>\r\n\t\t</div>\r\n\t</div>\r\n\r\n</div>\r\n\r\n<div class="gallery-view {{ $ctrl.id }}" data-ng-class="{\'nogui\' : !$ctrl.gui}" data-ng-click="$ctrl.setFocus()" data-ng-show="$ctrl.visible" data-ng-cloak>\r\n\r\n\t<div tabindex="1" class="keyInput" data-ng-keydown="$ctrl.keyUp($event)"></div>\r\n\r\n\t<div class="header">\r\n\r\n        <span class="buttons pull-right visible-sm visible-md visible-lg">\r\n\r\n                <button data-ng-if="!$ctrl.isSingle" class="btn btn-default btn-sm" data-ng-click="$ctrl.toFirst()">\r\n                    {{ $ctrl.selected + 1 }} | {{ $ctrl.files.length }}\r\n                </button>\r\n\r\n                <button data-ng-if="!$ctrl.isSingle" class="btn btn-default btn-sm" data-ng-click="$ctrl.toBackward()">\r\n                    <span class="glyphicon glyphicon-chevron-left"></span>\r\n                </button>\r\n\r\n                <button data-ng-if="!$ctrl.isSingle" class="btn btn-default btn-sm" data-ng-click="$ctrl.toForward()">\r\n                    <span class="glyphicon glyphicon-chevron-right"></span>\r\n                </button>\r\n\r\n             <span data-ng-if="!$ctrl.isSingle" class="dropdown">\r\n                    <button class="btn btn-default btn-sm dropdown-toggle ng-binding" type="button" data-toggle="dropdown">\r\n                        <span class="glyphicon glyphicon-menu-hamburger"></span>\r\n                    </button>\r\n                    <ul class="dropdown-menu pull-right">\r\n                        <li class="dropdown-submenu">\r\n                            <a class="transitions" tabindex="-1" href="#">Transitions <span class="caret"></span></a>\r\n                            <ul class="dropdown-menu">\r\n                                <li><a tabindex="-1" href="#" data-ng-click="$ctrl.setTransition(transition)" data-ng-repeat="transition in $ctrl.transitions">\r\n                                    <span data-ng-class="{\'color-highlight\' : transition == $ctrl.transition}">\r\n                                        {{ transition }}</span></a>\r\n                                </li>\r\n                            </ul>\r\n                        </li>\r\n                        <li><a href="#" tabindex="-1" data-ng-click="$ctrl.toggleHelp()">Help</a></li>\r\n                    </ul>\r\n                </span>\r\n\r\n\r\n                <button class="btn btn-default btn-sm" data-ng-click="$ctrl.toggleGUI()">\r\n                    <span data-ng-if="$ctrl.gui" class="glyphicon glyphicon-chevron-up"></span>\r\n                    <span data-ng-if="!$ctrl.gui" class="glyphicon glyphicon-chevron-down"></span>\r\n                </button>\r\n\r\n                <button class="btn btn-default btn-sm" data-ng-click="$ctrl.toggleFullScreen()">\r\n                    <span class="glyphicon glyphicon-fullscreen"></span>\r\n                </button>\r\n\r\n                <button class="btn btn-default btn-sm" data-ng-click="$ctrl.exit()">\r\n                    <span class="glyphicon glyphicon-remove"></span>\r\n                </button>\r\n\r\n            </span>\r\n\r\n\t\t<span class="buttons pull-right visible-xs">\r\n\r\n                    <button data-ng-if="!$ctrl.isSingle" class="btn btn-default btn-xs" data-ng-click="$ctrl.toFirst()">\r\n                        {{ $ctrl.selected + 1 }} | {{ $ctrl.files.length }}\r\n                    </button>\r\n\r\n                    <button data-ng-if="!$ctrl.isSingle" class="btn btn-default btn-xs" data-ng-click="$ctrl.toBackward()">\r\n                        <span class="glyphicon glyphicon-chevron-left"></span>\r\n                    </button>\r\n\r\n                    <button data-ng-if="!$ctrl.isSingle" class="btn btn-default btn-xs" data-ng-click="$ctrl.toForward()">\r\n                        <span class="glyphicon glyphicon-chevron-right"></span>\r\n                    </button>\r\n\r\n                    <span data-ng-if="!$ctrl.isSingle" class="dropdown">\r\n                        <button class="btn btn-default btn-xs dropdown-toggle ng-binding" type="button" data-toggle="dropdown">\r\n                            <span class="glyphicon glyphicon-menu-hamburger"></span>\r\n                        </button>\r\n                        <ul class="dropdown-menu pull-right">\r\n                            <li class="dropdown-submenu">\r\n                                <a class="transitions" tabindex="-1" href="#">Transitions <span class="caret"></span></a>\r\n                                <ul class="dropdown-menu">\r\n                                    <li><a tabindex="-1" href="#" data-ng-click="$ctrl.setTransition(transition)" data-ng-repeat="transition in $ctrl.transitions">\r\n                                        <span data-ng-class="{\'color-highlight\' : transition == $ctrl.transition}">\r\n                                            {{ transition }}</span></a>\r\n                                    </li>\r\n                                </ul>\r\n                            </li>\r\n                            <li><a href="#" tabindex="-1" data-ng-click="$ctrl.toggleHelp()">Help</a></li>\r\n                        </ul>\r\n                    </span>\r\n\r\n                    <button class="btn btn-default btn-xs" data-ng-click="$ctrl.toggleGUI()">\r\n                        <span data-ng-if="$ctrl.gui" class="glyphicon glyphicon-chevron-up"></span>\r\n                        <span data-ng-if="!$ctrl.gui" class="glyphicon glyphicon-chevron-down"></span>\r\n                    </button>\r\n\r\n                    <button class="btn btn-default btn-xs" data-ng-click="$ctrl.toggleFullScreen()">\r\n                        <span class="glyphicon glyphicon-fullscreen"></span>\r\n                    </button>\r\n\r\n                    <button class="btn btn-default btn-xs" data-ng-click="$ctrl.exit()">\r\n                        <span class="glyphicon glyphicon-remove"></span>\r\n                    </button>\r\n\r\n                </span>\r\n\r\n\t\t<h2 class="visible-md visible-lg">\r\n\t\t\t{{ $ctrl.options.title }} <span data-ng-if="$ctrl.options.subtitle" class="color-default badge">{{ $ctrl.options.subtitle }}</span>\r\n\t\t</h2>\r\n\r\n\t\t<h3 class="visible-sm">\r\n\t\t\t{{ $ctrl.options.title }} <span data-ng-if="$ctrl.options.subtitle" class="color-default badge">{{ $ctrl.options.subtitle }}</span>\r\n\t\t</h3>\r\n\r\n\t\t<h4 class="visible-xs">\r\n\t\t\t{{ $ctrl.options.title }} <span data-ng-if="$ctrl.options.subtitle" class="color-default badge">{{ $ctrl.options.subtitle }}</span>\r\n\t\t</h4>\r\n\r\n\t</div>\r\n\r\n\t<div class="help text-right" data-ng-click="$ctrl.toggleHelp()" data-ng-show="$ctrl.help">\r\n\t\tSPACE : forward<br>\r\n\t\tRIGHT : forward<br>\r\n\t\tLEFT : backward<br>\r\n\t\tUP : first<br>\r\n\t\tDOWN : last<br>\r\n\t\tESC : exit<br>\r\n\t\tT : change transition<br>\r\n\t\tF : toggle fullscreen<br>\r\n\t\tG : toggle gui<br>\r\n\t\tH : toggle help\r\n\t</div>\r\n\r\n\t<div class="images {{$ctrl.direction}} {{$ctrl.transition }}" data-ng-mouseover="$ctrl.functionsShow()" data-ng-mouseleave="$ctrl.functionsHide()" data-ng-swipe-left="$ctrl.toForward()" data-ng-swipe-right="$ctrl.toBackward()">\r\n\r\n\t\t<div class="img" data-ng-repeat="(key,file) in $ctrl.files" data-ng-show="$ctrl.selected == key" data-ng-class="{\'loading\' : !file.loaded}">\r\n\r\n\t\t\t<div class="source" data-ng-if="file.loaded" data-ng-style="{\'background-image\': \'url({{ file.source }})\'}"></div>\r\n\r\n\t\t\t<div class="description" data-ng-show="$ctrl.functionsVisible">\r\n\t\t\t\t<a href="{{ $ctrl.downloadLink() }}" target="_blank" class="btn btn-default btn-xs">\r\n\t\t\t\t\t<span class="glyphicon glyphicon-picture"></span> {{ $ctrl.file.description ?\r\n\t\t\t\t\t$ctrl.file.description : $ctrl.file.url }}\r\n\t\t\t\t\t| {{ $ctrl.file.size|bytes }}\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<div data-ng-if="!$ctrl.isSingle" data-ng-show="$ctrl.functionsVisible" class="toBackward">\r\n\r\n\t\t\t<button class="btn btn-default btn-lg pull-left visible-md visible-lg" data-ng-click="$ctrl.toBackward()">\r\n\t\t\t\t<span class="glyphicon glyphicon-chevron-left"></span>\r\n\t\t\t</button>\r\n\r\n\t\t\t<button class="btn btn-default btn-md pull-left visible-sm" data-ng-click="$ctrl.toBackward()">\r\n\t\t\t\t<span class="glyphicon glyphicon-chevron-left"></span>\r\n\t\t\t</button>\r\n\r\n\t\t\t<button class="btn btn-default btn-sm pull-left visible-xs" data-ng-click="$ctrl.toBackward()">\r\n\t\t\t\t<span class="glyphicon glyphicon-chevron-left"></span>\r\n\t\t\t</button>\r\n\r\n\t\t</div>\r\n\r\n\t\t<div data-ng-if="!$ctrl.isSingle" data-ng-show="$ctrl.functionsVisible" class="toForward">\r\n\r\n\t\t\t<button class="btn btn-default btn-lg pull-right visible-md visible-lg" data-ng-click="$ctrl.toForward()">\r\n\t\t\t\t<span class="glyphicon glyphicon-chevron-right"></span>\r\n\t\t\t</button>\r\n\r\n\t\t\t<button class="btn btn-default btn-md pull-right visible-sm" data-ng-click="$ctrl.toForward()">\r\n\t\t\t\t<span class="glyphicon glyphicon-chevron-right"></span>\r\n\t\t\t</button>\r\n\r\n\t\t\t<button class="btn btn-default btn-sm pull-right visible-xs" data-ng-click="$ctrl.toForward()">\r\n\t\t\t\t<span class="glyphicon glyphicon-chevron-right"></span>\r\n\t\t\t</button>\r\n\r\n\t\t</div>\r\n\r\n\t\t<div data-ng-show="$ctrl.functionsVisible" class="functions">\r\n\t\t</div>\r\n\r\n\t</div>\r\n\r\n\r\n</div>\r\n\r\n')}]);